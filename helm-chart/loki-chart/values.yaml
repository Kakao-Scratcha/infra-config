# 기본 설정
serviceAccount:
  create: true
  annotations: {}
  name: ""

service:
  type: ClusterIP
  port: 3100

ingress:
  enabled: false
  className: ""
  annotations: {}
  hosts:
    - host: loki.example.com
      paths:
        - path: /
          pathType: Prefix
  tls: []

autoscaling:
  enabled: false
  minReplicas: 1
  maxReplicas: 5
  targetCPUUtilizationPercentage: 80
  targetMemoryUtilizationPercentage: 80

# 추가 필요한 설정들
image:
  repository: nginx
  pullPolicy: IfNotPresent
  tag: ""

imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""

podAnnotations: {}
podSecurityContext: {}
securityContext: {}

resources: {}
nodeSelector: {}
tolerations: []
affinity: {}

# Loki 설정
loki:
  enabled: true
  persistence:
    enabled: true
    size: 5Gi
    storageClassName: csi-cinder-sc-retain
  replicas: 1
  backend:
    replicas: 1
  write:
    replicas: 1
  resources:
    requests:
      memory: "512Mi"
      cpu: "250m"
    limits:
      memory: "1Gi"
      cpu: "500m"
  nodeSelector:
    kakaoi.io/kke-nodepool: team2-api
  service:
    type: ClusterIP
    port: 3100
  # 프록시 환경변수 설정
  extraEnv:
    - name: HTTP_PROXY
      value: "http://10.0.130.50:3128"
    - name: HTTPS_PROXY
      value: "http://10.0.130.50:3128"
    - name: NO_PROXY
      value: "localhost,127.0.0.1,.svc.cluster.local,.cluster.local"
    - name: http_proxy
      value: "http://10.0.130.50:3128"
    - name: https_proxy
      value: "http://10.0.130.50:3128"
    - name: no_proxy
      value: "localhost,127.0.0.1,.svc.cluster.local,.cluster.local"

# Promtail 설정 (Loki와 함께 로그 수집)
promtail:
  enabled: true
  resources:
    requests:
      memory: "128Mi"
      cpu: "100m"
    limits:
      memory: "256Mi"
      cpu: "200m"
  nodeSelector:
    kakaoi.io/kke-nodepool: team2-api
  # Promtail 프록시 환경변수 설정
  extraEnv:
    - name: HTTP_PROXY
      value: "http://10.0.130.50:3128"
    - name: HTTPS_PROXY
      value: "http://10.0.130.50:3128"
    - name: NO_PROXY
      value: "localhost,127.0.0.1,.svc.cluster.local,.cluster.local"
    - name: http_proxy
      value: "http://10.0.130.50:3128"
    - name: https_proxy
      value: "http://10.0.130.50:3128"
    - name: no_proxy
      value: "localhost,127.0.0.1,.svc.cluster.local,.cluster.local"