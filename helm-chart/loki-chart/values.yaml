# Loki 차트 기본 설정

# Loki 설정
loki:
  enabled: true
  persistence:
    enabled: true
    storageClassName: csi-cinder-sc-retain
    size: 5Gi
  replicas: 1
  backend:
    replicas: 1
  write:
    replicas: 1
  # PVC 설정 (Grafana와 동일한 구조)
  volumeClaimTemplate:
    spec:
      accessModes:
        - ReadWriteOnce
      resources:
        requests:
          storage: 5Gi
      storageClassName: csi-cinder-sc-retain
  resources:
    requests:
      memory: "512Mi"
      cpu: "250m"
    limits:
      memory: "1Gi"
      cpu: "500m"
  nodeSelector:
    kakaoi.io/kke-nodepool: team2-api
  service:
    type: ClusterIP
    port: 3100
  # 프록시 환경변수 설정
  extraEnv:
    - name: HTTP_PROXY
      value: "http://10.0.130.50:3128"
    - name: HTTPS_PROXY
      value: "http://10.0.130.50:3128"
    - name: NO_PROXY
      value: "localhost,127.0.0.1,.svc.cluster.local,.cluster.local"
    - name: http_proxy
      value: "http://10.0.130.50:3128"
    - name: https_proxy
      value: "http://10.0.130.50:3128"
    - name: no_proxy
      value: "localhost,127.0.0.1,.svc.cluster.local,.cluster.local"

# Promtail 설정 (Loki와 함께 로그 수집)
promtail:
  enabled: true
  resources:
    requests:
      memory: "128Mi"
      cpu: "100m"
    limits:
      memory: "256Mi"
      cpu: "200m"
  nodeSelector:
    kakaoi.io/kke-nodepool: team2-api
  # Promtail 프록시 환경변수 설정
  extraEnv:
    - name: HTTP_PROXY
      value: "http://10.0.130.50:3128"
    - name: HTTPS_PROXY
      value: "http://10.0.130.50:3128"
    - name: NO_PROXY
      value: "localhost,127.0.0.1,.svc.cluster.local,.cluster.local"
    - name: http_proxy
      value: "http://10.0.130.50:3128"
    - name: https_proxy
      value: "http://10.0.130.50:3128"
    - name: no_proxy
      value: "localhost,127.0.0.1,.svc.cluster.local,.cluster.local"